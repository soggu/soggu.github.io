<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css">
  <title>soggu.party</title>
  <link rel="icon" type="image/x-icon" href="icon.jpg">
</head>
<body>
  <div class="cellgames">
    <a href="index.html"><h2>HOMER</h2></a>
    <br>
    <center><h1>cool new multiplayer mode</h1>
    <button id="clickButton">Click Me!</button></center>
    <div id="counter">global kliks: 0</div>
    <center>
    <a href="https://www.youtube.com/watch?v=VnlaBex56NY" target="_blank" rel="noopener noreferrer"><img src="images/cell.png" alt="cell out" style="width:500px;height:600px;"></a>
    </center>
    <footer>
      <p>6/18/2025 11:44am - 69 kliks reached</p>
    </footer>
  </div>
<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js';
  import { getDatabase, ref, runTransaction, onValue } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js';

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyD8Z6kvjomB1bJ4FcFm1916CaswoS3343w",
    authDomain: "soggupartyclicker.firebaseapp.com",
    databaseURL: "https://soggupartyclicker-default-rtdb.firebaseio.com",
    projectId: "soggupartyclicker",
    storageBucket: "soggupartyclicker.firebasestorage.app",
    messagingSenderId: "71673834411",
    appId: "1:71673834411:web:9a8814e3b3ce392659c0ee"
  };

  // Initialize Firebase app and database
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Reference to the counter
  const counterRef = ref(db, 'counter');

  // Real-time listener for counter changes
  onValue(counterRef, (snapshot) => {
    const count = snapshot.val();
    document.getElementById('counter').textContent = 'global kliks: ' + (count ?? 0);
  });

  // Event listener for the click button
  document.getElementById('clickButton').addEventListener('click', async () => {
    await runTransaction(counterRef, (current) => {
      return (current || 0) + 1;
    });
  });
</script>

</body>
</html>
